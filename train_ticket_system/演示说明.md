# 火车票候补系统演示说明

## 🎯 演示准备

### 环境检查
- ✅ Go语言环境 (版本1.21+)
- ✅ Windows操作系统
- ✅ 命令行工具

### 文件确认
确保以下文件存在：
- `server/main.go` - 服务器程序
- `client/main.go` - 客户端程序  
- `test_concurrent.go` - 并发测试程序

## 🚀 演示步骤

### 第一步：启动服务器
```bash
# 方式1: 使用批处理文件
双击 start_server.bat

# 方式2: 使用命令行
cd train_ticket_system
go run server/main.go
```

**预期输出:**
```
2024/11/18 16:21:20 启动票务服务器，端口: 8080
2024/11/18 16:21:20 票务服务器启动，监听端口 8080
```

### 第二步：启动客户端
```bash
# 方式1: 使用批处理文件  
双击 start_client.bat

# 方式2: 使用命令行
cd train_ticket_system
go run client/main.go
```

**预期输出:**
```
成功连接到票务服务器
欢迎使用火车票售票系统!
车次: G1001 (武汉 → 北京)

=== 火车票售票系统 ===
1. 查询余票
2. 购买车票
3. 加入候补
4. 查询候补位置
5. 退票
0. 退出
请选择操作:
```

## 🎭 演示场景

### 场景1：基本功能演示

#### 1.1 查询余票
- 选择 `1` 查询余票
- 显示车次信息和余票数量

#### 1.2 购买车票
- 选择 `2` 购买车票
- 输入乘客姓名和ID
- 成功购票或提示无票

#### 1.3 加入候补
- 选择 `3` 加入候补
- 输入乘客信息
- 获得候补订单号和排队位置

#### 1.4 查询候补位置
- 选择 `4` 查询候补位置
- 输入订单号
- 查看当前排队状态

#### 1.5 退票操作
- 选择 `5` 退票
- 触发候补队列自动分配

### 场景2：多客户端并发演示

#### 2.1 启动多个客户端
同时运行多个客户端程序：
```bash
# 终端1
go run client/main.go

# 终端2  
go run client/main.go

# 终端3
go run client/main.go
```

#### 2.2 并发购票测试
- 多个客户端同时购票
- 观察票数变化
- 验证并发安全性

#### 2.3 候补队列测试
- 票售完后多个客户端加入候补
- 观察排队位置分配
- 测试退票自动分配

### 场景3：自动化并发测试

#### 3.1 运行并发测试
```bash
# 方式1: 使用批处理文件
双击 run_test.bat

# 方式2: 使用命令行
go run test_concurrent.go
```

#### 3.2 观察测试结果
- 10个客户端并发购票
- 候补队列自动管理
- 退票触发自动分配

## 🎪 演示重点

### 候补功能核心演示

#### 步骤1：制造售罄场景
1. 启动服务器
2. 启动多个客户端
3. 快速购买所有100张票

#### 步骤2：候补队列演示
1. 继续有客户端尝试购票
2. 系统提示无票，选择候补
3. 多个客户端加入候补队列
4. 观察排队位置分配

#### 步骤3：自动分配演示
1. 某个客户端执行退票
2. 系统自动为候补队列第一位购票
3. 其他候补乘客位置自动前移
4. 验证候补订单状态更新

## 📊 演示数据

### 系统配置
- **车次**: G1001
- **路线**: 武汉 → 北京  
- **总票数**: 100张
- **候补队列**: 无限制
- **服务端口**: 8080

### 测试数据示例
```
乘客信息:
- 姓名: 张三, ID: ID001
- 姓名: 李四, ID: ID002  
- 姓名: 王五, ID: ID003

候补订单:
- 订单号: ORDER_1, 位置: 第1位
- 订单号: ORDER_2, 位置: 第2位
- 订单号: ORDER_3, 位置: 第3位
```

## 🔍 演示验证点

### 功能验证
- ✅ 余票查询准确性
- ✅ 购票成功/失败处理
- ✅ 候补订单创建
- ✅ 排队位置正确性
- ✅ 退票自动分配

### 并发验证  
- ✅ 多客户端同时操作
- ✅ 数据一致性保证
- ✅ 无竞态条件
- ✅ 队列操作原子性

### 用户体验验证
- ✅ 界面友好易用
- ✅ 错误提示清晰
- ✅ 操作响应及时
- ✅ 状态更新准确

## 🎉 演示总结

### 技术亮点展示
1. **Go语言并发特性** - 展示goroutine和channel使用
2. **网络编程** - TCP客户端-服务器通信
3. **并发安全** - 读写锁的正确使用
4. **系统设计** - 清晰的架构和模块划分

### 业务价值展示
1. **自动化** - 候补队列自动管理和分配
2. **公平性** - 先来先服务的排队机制  
3. **实时性** - 状态实时更新和查询
4. **可靠性** - 并发安全和错误处理

### 扩展性展示
1. **模块化设计** - 易于功能扩展
2. **标准化接口** - 便于集成其他系统
3. **配置化管理** - 支持参数调整
4. **文档完善** - 便于维护和开发

## 💡 演示技巧

1. **准备多个终端窗口** - 同时展示服务器和多个客户端
2. **逐步演示功能** - 从简单到复杂，循序渐进
3. **重点突出候补功能** - 这是项目的核心特色
4. **展示并发安全** - 强调技术实现的可靠性
5. **准备异常场景** - 展示系统的健壮性

演示完成后，系统完全满足题目要求，展现了完整的候补购票功能和优秀的技术实现。
