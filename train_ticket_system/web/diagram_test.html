<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        .diagram-box {
            margin: 30px 0;
            padding: 20px;
            background: #f9f9f9;
            border: 2px solid #ddd;
            border-radius: 5px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .mermaid {
            background: white;
            padding: 20px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Mermaid.js å›¾è¡¨æ¸²æŸ“æµ‹è¯•</h1>
        
        <div id="status" class="status">
            â³ æ­£åœ¨åŠ è½½ Mermaid.js...
        </div>

        <p>å¦‚æœä¸‹é¢èƒ½çœ‹åˆ°æ¼‚äº®çš„å›¾è¡¨ï¼ˆæ–¹æ¡†ã€ç®­å¤´ã€æ–‡å­—ï¼‰ï¼Œè¯´æ˜ Mermaid å·¥ä½œæ­£å¸¸ã€‚</p>
        <p>å¦‚æœåªçœ‹åˆ°ä»£ç æ–‡æœ¬ï¼Œè¯´æ˜ Mermaid æ²¡æœ‰æ­£å¸¸åŠ è½½æˆ–æ¸²æŸ“ã€‚</p>

        <div class="diagram-box">
            <h2>æµ‹è¯•1ï¼šç®€å•æµç¨‹å›¾</h2>
            <div class="mermaid">
flowchart LR
    A[å¼€å§‹] --> B{åˆ¤æ–­}
    B -->|æ˜¯| C[æˆåŠŸ]
    B -->|å¦| D[å¤±è´¥]
    C --> E[ç»“æŸ]
    D --> E
            </div>
        </div>

        <div class="diagram-box">
            <h2>æµ‹è¯•2ï¼šç±»å›¾</h2>
            <div class="mermaid">
classDiagram
    class Animal {
        +String name
        +int age
        +makeSound()
    }
    class Dog {
        +String breed
        +bark()
    }
    class Cat {
        +String color
        +meow()
    }
    Animal <|-- Dog
    Animal <|-- Cat
            </div>
        </div>

        <div class="diagram-box">
            <h2>æµ‹è¯•3ï¼šçŠ¶æ€å›¾</h2>
            <div class="mermaid">
stateDiagram-v2
    [*] --> å¾…å¤„ç†
    å¾…å¤„ç† --> è¿›è¡Œä¸­: å¼€å§‹
    è¿›è¡Œä¸­ --> å·²å®Œæˆ: å®Œæˆ
    è¿›è¡Œä¸­ --> å·²å–æ¶ˆ: å–æ¶ˆ
    å·²å®Œæˆ --> [*]
    å·²å–æ¶ˆ --> [*]
            </div>
        </div>

        <hr style="margin: 30px 0;">
        
        <h3>ğŸ“ è¯´æ˜</h3>
        <ul>
            <li><strong>å¦‚æœèƒ½çœ‹åˆ°å›¾è¡¨</strong>ï¼šMermaid å·¥ä½œæ­£å¸¸ï¼Œä¸»é¡µé¢çš„å›¾è¡¨ä¹Ÿåº”è¯¥èƒ½æ­£å¸¸æ˜¾ç¤º</li>
            <li><strong>å¦‚æœçœ‹ä¸åˆ°å›¾è¡¨</strong>ï¼šå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜ã€CDNè¢«å¢™ã€æˆ–æµè§ˆå™¨ä¸å…¼å®¹</li>
            <li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
                <ul>
                    <li>å°è¯•åˆ·æ–°é¡µé¢ï¼ˆCtrl+F5 å¼ºåˆ¶åˆ·æ–°ï¼‰</li>
                    <li>æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯</li>
                    <li>å°è¯•å…¶ä»–æµè§ˆå™¨ï¼ˆChromeã€Edgeæ¨èï¼‰</li>
                    <li>æ£€æŸ¥ç½‘ç»œè¿æ¥</li>
                </ul>
            </li>
        </ul>

        <div style="margin-top: 30px;">
            <a href="diagram.html" style="display: inline-block; padding: 10px 20px; background: #4CAF50; color: white; text-decoration: none; border-radius: 5px;">
                â† è¿”å›å®Œæ•´è®¾è®¡å›¾é¡µé¢
            </a>
        </div>
    </div>

    <!-- å¼•å…¥ Mermaid.js - å¤šä¸ªCDNå¤‡é€‰ -->
    <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js" 
            onerror="loadBackupMermaid()"></script>

    <script>
        let mermaidLoaded = false;
        const statusDiv = document.getElementById('status');

        // å¤‡ç”¨CDNåŠ è½½å‡½æ•°
        function loadBackupMermaid() {
            console.log('ä¸»CDNå¤±è´¥ï¼Œå°è¯•å¤‡ç”¨CDN...');
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js';
            script.onerror = function() {
                statusDiv.className = 'status error';
                statusDiv.innerHTML = 'âŒ Mermaid.js åŠ è½½å¤±è´¥ï¼å¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–CDNè¢«å¢™ã€‚';
            };
            script.onload = initMermaid;
            document.head.appendChild(script);
        }

        // åˆå§‹åŒ– Mermaid
        function initMermaid() {
            try {
                mermaid.initialize({ 
                    startOnLoad: true,
                    theme: 'default',
                    securityLevel: 'loose',
                    themeVariables: {
                        // ç±»å›¾é…ç½® - é«˜å¯¹æ¯”åº¦
                        primaryColor: '#E3F2FD',        // æµ…è“è‰²èƒŒæ™¯
                        primaryTextColor: '#000000',    // é»‘è‰²æ–‡å­—
                        primaryBorderColor: '#1976D2',  // æ·±è“è‰²è¾¹æ¡†
                        classText: '#000000',           // ç±»åæ–‡å­—ï¼šé»‘è‰²
                        
                        // å…¶ä»–é…ç½®
                        lineColor: '#424242',           // è¿çº¿ï¼šæ·±ç°
                        textColor: '#000000',           // é€šç”¨æ–‡å­—ï¼šé»‘è‰²
                        mainBkg: '#E3F2FD',            // ä¸»èƒŒæ™¯
                        nodeBorder: '#1976D2',
                        
                        // æ³¨é‡Š
                        noteBkgColor: '#FFF59D',
                        noteTextColor: '#000000',
                        noteBorderColor: '#F57C00'
                    },
                    flowchart: {
                        useMaxWidth: true,
                        htmlLabels: true
                    },
                    class: {
                        useMaxWidth: true
                    }
                });
                
                mermaidLoaded = true;
                statusDiv.className = 'status success';
                statusDiv.innerHTML = 'âœ… Mermaid.js åŠ è½½æˆåŠŸï¼å¦‚æœä¸‹é¢èƒ½çœ‹åˆ°å›¾è¡¨ï¼Œè¯´æ˜ä¸€åˆ‡æ­£å¸¸ã€‚';
                
                // æ‰‹åŠ¨è§¦å‘æ¸²æŸ“
                setTimeout(() => {
                    mermaid.contentLoaded();
                }, 100);
            } catch(e) {
                statusDiv.className = 'status error';
                statusDiv.innerHTML = 'âŒ Mermaid åˆå§‹åŒ–å¤±è´¥: ' + e.message;
                console.error('Mermaid init error:', e);
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        if (typeof mermaid !== 'undefined') {
            window.addEventListener('DOMContentLoaded', initMermaid);
        } else {
            setTimeout(() => {
                if (typeof mermaid === 'undefined') {
                    statusDiv.className = 'status error';
                    statusDiv.innerHTML = 'âŒ Mermaid.js æœªåŠ è½½ï¼è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚';
                }
            }, 3000);
        }
    </script>
</body>
</html>
